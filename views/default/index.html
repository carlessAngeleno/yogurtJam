<?extend "layout.html"?>     

<script type="text/x-handlebars" data-template-name="application">  

  <!-- Navbar ================================================== -->
  <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="flash"><?=response.flash or ''?></div>
    <div class="navbar-inner">
      <div class="container">
        <?is_mobile=request.user_agent().is_mobile?>
        <a class="brand icon" style="background-color: none;" href="<?=URL('../..') + '/#/'?>">
          <?=XML("&nbsp&nbsp")?>
          <img src="<?=URL('static', 'images/favicon.png')?>"/>
        </a>
        <?=response.logo or ''?>
        <div class="offset4">
        <ul class="nav ca_nav">
          <li>
            {{#link-to "memories.index" activeClass="active"}}
            <i class="icon-search icon-white"></i> search
            {{/link-to}}
          </li>
          <li>
            {{#link-to "share" activeClass="active"}}
            <i class="icon-pencil icon-white"></i> share
            {{/link-to}}
          </li>
        </ul>
        </div>

      
        <?include '../../shared/views/generic/also_by_ember.html'?>  
        <div class="<?='nav-collapse' if is_mobile else 'nav pull-right'?>">                          
          <?if response.menu:?>
          <?=MENU(response.menu, _class='mobile-menu nav' if is_mobile else 'nav',mobile=is_mobile,li_class='dropdown',ul_class='dropdown-menu')?>
          <?pass?>
        </div><!--/.nav-collapse -->
      </div>
    </div>
  </div><!--/top navbar -->

  <div id="main_container">
    {{render 'google-map' controller='Memories' id="map_canvas"}}
    <div id="interface">             
      <div class="memory_display ca_section">
        {{outlet}}
      </div> 
    </div>       
  </div>          
</script>

<script type="text/x-handlebars" data-template-name="memories/index">  
  <div id="search_tab">
    <h4>Search Memories</h4>      
      <p>What does your song mean to other people? </p>
    <div class="search_tab_sub">
      <form>            
        <fieldset>                        
          <div class="control-group">
            {{input type="text" placeholder="title (e.g. smells like teen spirit)" value=newTitle}}                  
          </div>
          <div class="control-group">
            {{input type="text" placeholder="artist (e.g. nirvana)" value=newArtist}}
          </div>
          <div class="control-group">
           {{#link-to "results"}}
            <button class="btn ca_button" {{action 'searchMemories'}}><i class="icon-search icon-white"></i> search</button>
            {{/link-to}}
          </div>   
        </fieldset>            
      </form>
    </div>
  </div>  
</script>

<script type="text/x-handlebars" data-template-name="results"> 
  <div class="control-group">      
    <button class="btn ca_button" {{action 'pickRandomMemory'}} style="float:right;"><i class="icon-random icon-white"></i></button>
    <!-- <button class="btn ca_button"><i class=" icon-zoom-out icon-white"></i> </button> -->
    <!-- <button class="btn ca_button"><i class="icon-forward icon-white"></i> </button> -->                  
  </div>
  <div>
    <h4>{{controller.newTitle}} - {{controller.newArtist}}</h4>
    <div> 
      <ul>
        {{#each controller}}
          <li>
            {{#link-to 'memory' this}}
              {{g_place}}, {{tag1}}
            {{/link-to}}
          </li>
        {{/each}}
      </ul>
    </div>
  </div>  
</script>

<script type="text/x-handlebars" data-template-name="share">  
  <div id="share_tab">
    <h4>Share Memories</h4>       
    {{outlet}}     
  </div>      
</script>

<script type="text/x-handlebars" data-template-name="share/song">  

  <div class="share_tab_sub" id="share_tab_select_video">
    <p>Which song? </p>            
    <form>
      <fieldset>
        <div class="control-group">
          {{input type="text" placeholder="title (e.g. the scientist)" value=newTitle}} 
        </div>
        <div class="control-group">
          {{input type="text" placeholder="artist (e.g. coldplay)" value=newArtist}}
        </div>
        <!-- clicking on button pulls up next stage -->
        <div class="control-group">
          <button class="ca_button" {{action 'searchYoutube'}}> find videos for it </button> 
        </div>
      </fieldset>
    </form>  
  </div>  

  <div id="gsvb_modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
      <h3 id="myModalLabel">Which Song?</h3>
    </div>
    <div class="modal-body">
        <!-- container for YT player -->
        <div>
          <div id="player_container_share"> </div>              
          <!-- GSVideoBar (interactive search result that plays YT videos when you click on thumbnails)-->
          <div><div id="videoBar"></div></div>                  
        </div>      
    </div>
    <div class="modal-footer">
      {{#link-to "share.location"}}
        <button class="ca_button" data-dismiss="modal" aria-hidden="true" {{action 'selectVideo'}}>Choose</button>
      {{/link-to}}
    </div>
  </div> 

</script>

<script type="text/x-handlebars" data-template-name="share/location">  
  <div class="share_tab_sub" id="share_tab_select_location">
    <p> Enter location associated with memory </p>                    
    {{render 'g_places_input' controller='Memories'}}     
    <br/>
    {{#link-to "share.story"}}
      <button id="select_place_button" class="btn ca_button" {{action 'confirmLocation'}}> yup - this is the place! </button>
    {{/link-to}}                                            
    </input>        
  </div>     
</script>

<script type="text/x-handlebars" data-template-name="share/story">  
  <form class="share_tab_sub">
    <p> Finally, tell us what the song reminds you of! </p>     
    <div class="control-group">
      {{datepicker-input value=newMemoryDate placeholder="when?"}} 
    </div>  
    <div class="control-group">
        {{textarea placeholder="reminds me of..." rows=10 cols=30 value=newStory}} 
    </div>           
    <div class="control-group">
        {{input type="text" placeholder="tags (e.g. trip, friend)" value=newTags}} 
    </div>                                                                   
    <div class="control-group">
    {{#link-to "results"}}    
        <button class="btn ca_button" {{action 'insertMemory'}}>share memory</button> 
    {{/link-to}}
    </div>                
  </form>    
</script>

<script type="text/x-handlebars" data-template-name="memory">  
  <div class="control-group row-fluid">      
    <!-- <button class="btn ca_button"><i class="icon-random icon-white"></i></button> -->
      <button class="btn ca_button" {{action 'zoomOut'}}><i class="icon-resize-small icon-white"></i> </button>
    <button class="btn ca_button" {{action 'centerMap'}}><i class="icon-map-marker icon-white"></i> </button>    
   <!-- <button class="btn ca_button"><i class="icon-resize-full icon-white"></i> </button>
    <button class="btn ca_button"><i class=" icon-zoom-out icon-white"></i> </button> -->
    <button class="btn ca_button offset1"><i class="icon-heart icon-white"></i> </button>   
    <button class="btn ca_button"><i class="icon-thumbs-down icon-white"></i> </button>       
    <button class="btn ca_button offset1"><i class="icon-gift icon-white"></i> </button>
    {{#link-to "memory" next}}       
    <button class="btn ca_button" style="float:right;"><i class="icon-forward icon-white"></i> </button>                  
    {{/link-to}}
  </div>
  <div class="content_display">
    {{#view App.YoutubeIframePlayerView}}{{/view}}
  </div> 
  <h4>{{g_place}} <small> - {{formattedDate memoryDateShare}}</small></h4>
  
  <div>
  <blockquote class="ca_blockquote">{{story}}</blockquote>
  <!--<p><small>{{tag1}}</small></p> -->
  <p class="muted"><small>uploaded {{timeAgo time_added}}</small></p>
  </div> 
</script>